<!--
Copyright 2013 Luís de Sousa

Licensed under the EUPL, Version 1.1 or – as soon they will be approved by the 
European Commission - subsequent versions of the EUPL (the "Licence");
You may not use this work except in compliance with the Licence.
You may obtain a copy of the Licence at:

http://ec.europa.eu/idabc/eupl

Unless required by applicable law or agreed to in writing, software distributed 
under the Licence is distributed on an "AS IS" basis,  WITHOUT WARRANTIES OR 
CONDITIONS OF ANY KIND, either express or implied. See the Licence for the 
specific language governing permissions and limitations under the Licence.
-->

<html>
<head>

<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>

<script src="http://code.jquery.com/jquery-1.8.3.js"></script>
<script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script>

<script type="text/javascript">
jQuery.noConflict();
</script>

<script src="http://code.highcharts.com/highcharts.js"></script>
<script src="http://code.highcharts.com/modules/exporting.js"></script>
<script src="http://www.highcharts.com/js/themes/gray.js"></script>

<!--Links for the blog-->
<!--
<script src="https://raw.github.com/ldesousa/spcc/master/lib/calc.js"></script>
<script src="https://raw.github.com/ldesousa/spcc/master/lib/validators.js"></script>
<script src="https://raw.github.com/ldesousa/spcc/master/lib/charts.js"></script>
<script src="https://raw.github.com/ldesousa/spcc/master/lib/info.js"></script>

<link  href="https://raw.github.com/ldesousa/spcc/master/styles.css" rel="stylesheet">
-->
<script src="lib/calc.js"></script>
<script src="lib/validators.js"></script>
<script src="lib/charts.js"></script>
<script src="lib/info.js"></script>

<link  href="styles.css" rel="stylesheet">

</head>

<body bgcolor="#454545" text="#CCCCCC">

<table border=0 width=400 align=center cellspacing=6>
<tr class="title">
 <td colspan=3 align=left><b>1. System characteristics</b></td>
</tr>
<tr class="input-line">
 <td align=right width=350>
  <div onMouseOver="spcc.info.setItalic(this, 'sysCapInfo')" 
	   onMouseOut="spcc.info.setItalic(this, 'sysCapInfo')" 
       onClick="spcc.info.toggle(this, 'sysCapInfo')"
	   title="Click for details" class="descriptor">
   Installed capacity
  </div>
 </td>
 <td width=80><input type="text"  class="input" class="input" id="sysCap" value="1" size=10 onChange="spcc.val.sysCap(this);"/></td>
 <td width=50>kWp</td>
</tr>
<tr id="sysCapInfo" class="input-line" style="display:none">
 <td colspan=3>
  <i>The installed capacity of the system in Watt (W - sometimes called Watt-peak, Wp). 
  This is the maximum power output the system can generate under optimal conditions.</i>
 </td>
</tr>
<tr class="input-line-alt">
 <td align=right width=350>
  <div onMouseOver="spcc.info.setItalic(this, 'sysGenInfo')" 
	   onMouseOut="spcc.info.setItalic(this, 'sysGenInfo')" 
       onClick="spcc.info.toggle(this, 'sysGenInfo')"
	   title="Click for details" class="descriptor">
	Expected generation
  </div>
 </td>
 <td width=80><input type="text"  class="input" id="sysGen" value="1000" size=10 onChange="spcc.val.sysGen(this);"/></td>
 <td width=50>Wh/Wp/a</td>
</tr>
<tr id="sysGenInfo" class="input-line-alt" style="display:none">
 <td colspan=3>
  <i>The expected amount of energy generated yearly in Watt-hour per Watt-peak per year (Wh/Wp/a). 
  This figure is a function of the sunlight the system receives each year, dependent on latitude and orientation.
  The <a href=http://re.jrc.ec.europa.eu/pvgis/>JRC</a> produces a series of maps for Europe with maximum generation values that can be a good starting point to obtain this information.</i>
 </td>
</tr>
<tr class="input-line">
 <td align=right width=350>
  <div onMouseOver="spcc.info.setItalic(this, 'sysDecayInfo')" 
	   onMouseOut="spcc.info.setItalic(this, 'sysDecayInfo')" 
       onClick="spcc.info.toggle(this, 'sysDecayInfo')"
	   title="Click for details" class="descriptor">
	Efficiency decay
  </div>
 </td>
 <td width=80><input type="text"  class="input" id="sysDecay" value="0.5" size=10 onChange="spcc.val.sysDecay(this);"/></td>
 <td width=50>%/a</td>
</tr>
<tr id="sysDecayInfo" class="input-line" style="display:none">
 <td colspan=3>
 <i> The efficiency with which solar panels harvest energy decays with time, in part due to the impact of sunlight itself.
  Although not linear, nor constant, a figure of 0.5 percent per year (%/a) is a sensible option (i.e. a system that generated 1000 Wh this year will generate 995 Wh next year). </i>
 </td>
</tr>
<tr class="input-line-alt">
 <td align=right width=350>
 <div onMouseOver="spcc.info.setItalic(this, 'sysLifetimeInfo')" 
	  onMouseOut="spcc.info.setItalic(this, 'sysLifetimeInfo')" 
      onClick="spcc.info.toggle(this, 'sysLifetimeInfo')"
	   title="Click for details" class="descriptor">
  Expected lifetime
 </div>
 <td width=80><input type="text"  class="input" id="sysLifetime" value="30" size=10 onChange="spcc.val.sysLifetime(this);"/></td>
 <td width=50>years</td>
</tr>
<tr id="sysLifetimeInfo" class="input-line-alt" style="display:none">
 <td colspan=3>
  <i>The number of years the system is supposed to last. Various indicators can be used to determine expected system lifetime, like the point where efficiency drops below 80% of initial characteristics. However, the most sensible option is to match this figure to the panels warranty period.</i>
 </td>
</tr>
<tr><td height=10></td></tr>
<tr  class="title">
 <td colspan=3 align=left><b>2. Investment costs</b></td>
</tr>
<tr class="input-line">
 <td align=right width=350>
  <div onMouseOver="spcc.info.setItalic(this, 'invPanelsInfo')" 
	   onMouseOut="spcc.info.setItalic(this, 'invPanelsInfo')" 
       onClick="spcc.info.toggle(this, 'invPanelsInfo')"
	   title="Click for details" class="descriptor">
	Panels
  </div>
 </td>
 <td width=80><input type="text"  class="input" id="invPanels" value="600" size=10 onChange="spcc.val.invPanels(this);"/></td>
 <td width=50>&euro;/kWp</td>
</tr>
<tr id="invPanelsInfo" class="input-line" style="display:none">
 <td colspan=3>
  <i>The cost of the solar panels composing the system in euros per kWp (&euro;/kWp). 
  If only the bulk cost is known, including inverter and installation, insert the full value here and leave zero on the following two fields.</i>
 </td>
</tr>
<tr class="input-line-alt">
 <td align=right width=350>
  <div onMouseOver="spcc.info.setItalic(this, 'invInverterInfo')" 
	   onMouseOut="spcc.info.setItalic(this, 'invInverterInfo')" 
       onClick="spcc.info.toggle(this, 'invInverterInfo')"
	   title="Click for details" class="descriptor">
	Inverter
  </div>
 </td>
 <td width=80><input type="text"  class="input" id="invInverter" value="200" size=10 onChange="spcc.val.invInverter(this);"/></td>
 <td width=50>&euro;/kWp</td>
</tr>
<tr id="invInverterInfo" class="input-line-alt" style="display:none">
 <td colspan=3>
  <i>The cost of the inverter linking the system to the grid (or storage system) in euros per kWp (&euro;/kWp). 
  If only the bulk cost is known, including panels and inverter, leave zero in this field and use only the Panels cost field.</i>
 </td>
</tr>
<tr class="input-line">
 <td align=right width=350>
  <div onMouseOver="spcc.info.setItalic(this, 'invInstallInfo')" 
	   onMouseOut="spcc.info.setItalic(this, 'invInstallInfo')" 
       onClick="spcc.info.toggle(this, 'invInstallInfo')"
	   title="Click for details" class="descriptor">
	Assembly and Installation
  </div>
 </td>
 <td width=80><input type="text"  class="input" id="invInstall" value="800" size=10 onChange="spcc.val.invInstall(this);"/></td>
 <td width=50>&euro;/kWp</td>
</tr>
<tr id="invInstallInfo" class="input-line" style="display:none">
 <td colspan=3>
  <i>The cost of system installation (usually also including paperwork and other procedures) in euros per kWp (&euro;/kWp). 
  If only the bulk cost is known, including panels and installation, leave zero in this field and use only the Panels cost field.</i>
 </td>
</tr>
<tr><td height=10></td></tr>
<tr>
 <td colspan=3 align=left class="title"><b>3. Maintenance</b></td>
</tr>
<tr class="input-line">
 <td align=right width=350>
  <div onMouseOver="spcc.info.setItalic(this, 'maintInverterInfo')" 
	   onMouseOut="spcc.info.setItalic(this, 'maintInverterInfo')" 
       onClick="spcc.info.toggle(this, 'maintInverterInfo')"
	   title="Click for details" class="descriptor">
	Inverter lifetime
  </div>
 </td>
 <td width=80><input type="text"  class="input" id="maintInverter" value="10" size=10 onChange="spcc.val.maintInverter(this);"/></td>
 <td width=50>years</td>
</tr>
<tr id="maintInverterInfo" class="input-line" style="display:none">
 <td colspan=3>
  <i>The lifetime of a solar panel is usually measured in decades, but the inverter is unlikely to last as long. 
  To calculate full costs the replacement of the inverter must accounted for. Again, warranty may be the best indicator.</i>
 </td>
</tr>
<tr class="input-line-alt">
 <td align=right width=350>
  <div onMouseOver="spcc.info.setItalic(this, 'maintOtherInfo')" 
	   onMouseOut="spcc.info.setItalic(this, 'maintOtherInfo')" 
       onClick="spcc.info.toggle(this, 'maintOtherInfo')"
	   title="Click for details" class="descriptor">
	Other costs
  </div>
 </td>
 <td width=80><input type="text"  class="input" id="maintOther" value="20" size=10 onChange="spcc.val.maintOther(this);"/></td>
 <td width=50>&euro;/a</td>
</tr>
<tr id="maintOtherInfo" class="input-line-alt" style="display:none">
 <td colspan=3>
  <i>Other costs that may arrive, in euros per year (&euro;/a). 
  Cleaning can be a necessity after long periods without rain, or in places frequented by birds.
  If insurance is required it can also be included in this field.</i>
 </td>
</tr>
<tr><td height=10></td></tr>
<tr>
 <td colspan=3 align=left class="title"><b>4. Financing</b></td>
</tr>
<tr class="input-line">
 <td align=right width=350>
  <div onMouseOver="spcc.info.setItalic(this, 'fincPercentInfo')" 
	   onMouseOut="spcc.info.setItalic(this, 'fincPercentInfo')" 
       onClick="spcc.info.toggle(this, 'fincPercentInfo')"
	   title="Click for details" class="descriptor">
	Percentage financed
  </div>
 </td>
 <td width=80><input type="text"  class="input" id="fincPercent" value="80" size=10 onChange="spcc.val.fincPercent(this);"/></td>
 <td width=50>%</td>
</tr>
<tr id="fincPercentInfo" class="input-line" style="display:none">
 <td colspan=3>
  <i>In case the system needs to be financed, this extra cost must be taken into account. 
  Here goes the percentage of the initial investment financed by a third party.
  As an example if the initial investment is 1000 &euro; and financing is 800 &euro; the value to insert is 80%.</i>
 </td>
</tr>
<tr class="input-line-alt">
 <td align=right width=350>
  <div onMouseOver="spcc.info.setItalic(this, 'fincTimeInfo')" 
	   onMouseOut="spcc.info.setItalic(this, 'fincTimeInfo')" 
       onClick="spcc.info.toggle(this, 'fincTimeInfo')"
	   title="Click for details" class="descriptor">
	Time
  </div>
 </td>
 <td width=80><input type="text"  class="input" id="fincTime" value="8" size=10 onChange="spcc.val.fincTime(this);"/></td>
 <td width=50>years</td>
</tr>
<tr id="fincTimeInfo" class="input-line-alt" style="display:none">
 <td colspan=3>
  <i>The time span in years that it will take to pay back the financing.</i>
 </td>
</tr>
<tr class="input-line">
 <td align=right width=350>
  <div onMouseOver="spcc.info.setItalic(this, 'fincInterestInfo')" 
	   onMouseOut="spcc.info.setItalic(this, 'fincInterestInfo')" 
       onClick="spcc.info.toggle(this, 'fincInterestInfo')"
	   title="Click for details" class="descriptor">
	Interest
  </div>
 </td>
 <td width=80><input type="text"  class="input" id="fincInterest" value="2" size=10 onChange="spcc.val.fincInterest(this);"/></td>
 <td width=50>%/a</td>
</tr>
<tr id="fincInterestInfo" class="input-line" style="display:none">
 <td colspan=3>
  <i>The interested paid back to the financier as percentage per year (%/a).</i>
 </td>
</tr>
<tr><td height=10></td></tr>
<tr>
 <td colspan=3 align=left class="title"><b>5. Storage</b></td>
</tr>
<tr class="input-line">
 <td align=right width=350>
  <div onMouseOver="spcc.info.setItalic(this, 'strgCostInfo');" 
	   onMouseOut="spcc.info.setItalic(this, 'strgCostInfo')" 
       onClick="spcc.info.toggle(this, 'strgCostInfo')"
	   title="Click for details" class="descriptor">
	Cost
  </div>
 </td>
 <td width=80><input type="text"  class="input" id="strgCost" value="600" size=10 onChange="spcc.val.strgCost(this);"/></td>
 <td width=50>&euro;</td>
</tr>
</tr>
<tr id="strgCostInfo" class="input-line" style="display:none">
 <td colspan=3>
  <i>If the system is being installed off-the-grid, linked instead to a storage system, its costs must be included in the calculation.
  Beyond batteries this value must include controller(s) or any other additional hardware costs.</i>
 </td>
</tr>
<tr class="input-line-alt">
 <td align=right width=350>
  <div onMouseOver="spcc.info.setItalic(this, 'strgLifetimeInfo')" 
	   onMouseOut="spcc.info.setItalic(this, 'strgLifetimeInfo')" 
       onClick="spcc.info.toggle(this, 'strgLifetimeInfo')"
	   title="Click for details" class="descriptor">
	Lifetime
  </div>
 </td>
 <td width=80><input type="text"  class="input" id="strgLifetime" value="10" size=10 onChange="spcc.val.strgLifetime(this);"/></td>
 <td width=50>years</td>
</tr>
<tr id="strgLifetimeInfo" class="input-line-alt" style="display:none">
 <td colspan=3>
  <i>The storage harware should have a lifetime inferior to that of the panels themselves, thus replacements must be accounted for.
  Warranty is once more the best indicator.</i>
 </td>
</tr>
<tr class="input-line">
 <td align=right width=350>
  <div onMouseOver="spcc.info.setItalic(this, 'strgEffInfo')" 
	   onMouseOut="spcc.info.setItalic(this, 'strgEffInfo')" 
       onClick="spcc.info.toggle(this, 'strgEffInfo')"
	   title="Click for details" class="descriptor">
	Effiency
  </div>
 </td>
 <td width=80><input type="text"  class="input" id="strgEff" value="90" size=10 onChange="spcc.val.strgEff(this);"/></td>
 <td width=50>%</td>
</tr>
<tr id="strgEffInfo" class="input-line" style="display:none">
 <td colspan=3>
  <i>Any storage system has losses, meaning that the amount of energy it feeds back is always somewhat inferior to that used to charge it.
  This value is the percentage of the energy return relative to the energy charged. 
  For instance, if a system is charged with 1000 Wh and returns back 900 Wh this value is 90%.</i>
 </td>
</tr>
<tr class="input-line-alt">
 <td align=right width=350>
  <div onMouseOver="spcc.info.setItalic(this, 'strgShareInfo')" 
	   onMouseOut="spcc.info.setItalic(this, 'strgShareInfo')" 
       onClick="spcc.info.toggle(this, 'strgShareInfo')"
	   title="Click for details" class="descriptor">
	Share of energy stored
  </div>
 </td>
 <td width=80><input type="text"  class="input" id="strgShare" value="30" size=10 onChange="spcc.val.strgShare(this);"/></td>
 <td width=50>%</td>
</tr>
<tr id="strgShareInfo" class="input-line-alt" style="display:none">
 <td colspan=3>
  <i>Not all the energy generated by the solar panels needs to be stored, part of is consumed immediately by household appliances.
  An off-the-grid system should be dimensioned in order to minimise the usage of the storage system, so that it is needed mainly during summer, making the extra energy generated during the day available to the night; during the winter months ideally the storage system should not be needed. This field is thus the percentage of the total energy generated throughout the year that needs to be stored.</i>
 </td>
</tr>
<tr height=80>
 <td align=center colspan=3><input type="button" value="Calculate" onclick="spcc.calculate();" style="width=100px"></td>
</tr>
</table>
<div id="graph-container" style="width: 580px; height: 400px; margin: 0 auto">
</div>
<br><br>
<div id="pie-container" style="width: 580px; height: 400px; margin: 0 auto">
</div>
<br><br>
<div id="debug-container"></div>
</body>
</html>







